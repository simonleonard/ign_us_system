<PlusConfiguration version="2.2" >

  <Device
      Id="VideoDevice"
      Type="UsSimulator"
      LocalTimeOffsetSec="0.0"
      AcquisitionRate="15" >
    <DataSources>
      <DataSource Type="Video" Id="Video" PortUsImageOrientation="MF" />  
    </DataSources>      
    <InputChannels>
      <InputChannel Id="TrackerStream" />
    </InputChannels>
    <OutputChannels>
      <OutputChannel Id="VideoStream" VideoDataSourceId="Video" />
    </OutputChannels>
  </Device>
  
  <vtkPlusUsSimulatorAlgo
      ImageCoordinateFrame="Image"
      ReferenceCoordinateFrame="Reference"
      IncomingIntensityMwPerCm2="300"
      BrightnessConversionGamma="0.2"
      BrighntessConversionOffset="30"
      NumberOfScanlines="128"
      NumberOfSamplesPerScanline="1000"
      NoiseAmplitude="5.0"
      NoiseFrequency="2.5 3.5 1"
      NoisePhase="50 20 0"        
      >
    <SpatialModel
        Name="Air"
        DensityKgPerM3="1.2"
        SoundVelocityMPerSec="343"
        AttenuationCoefficientDbPerCmMhz="100.0"
        BackscatterDiffuseReflectionCoefficient="0.1"
        SurfaceReflectionIntensityDecayDbPerMm="50"
	/>
    <SpatialModel
        Name="GelBlock"
        ObjectCoordinateFrame="Reference"
        ModelFile="gel_block.stl"
        DensityKgPerM3="910"
        SoundVelocityMPerSec="1540"
        AttenuationCoefficientDbPerCmMhz="3.0"
        BackscatterDiffuseReflectionCoefficient="0.1"
        SurfaceSpecularReflectionCoefficient="0.1"
        SurfaceDiffuseReflectionCoefficient="0.0"
        TransducerSpatialModelMaxOverlapMm="50"
        />
    <SpatialModel
        Name="Vessel"
        ObjectCoordinateFrame="Reference"
        ModelFile="vessel.stl"
        ModelToObjectTransform="
				1 0 0 0
				0 1 0 0
				0 0 1 0
				0 0 0 1"
        DensityKgPerM3="1800"
        SoundVelocityMPerSec="2000"
        AttenuationCoefficientDbPerCmMhz="0.0001"
        BackscatterDiffuseReflectionCoefficient="0.03"          
        SurfaceSpecularReflectionCoefficient="0.1"
        SurfaceDiffuseReflectionCoefficient="0.0"
        />
    <RfProcessing>
      <ScanConversion
          TransducerName="BK_8848-axial"
          TransducerGeometry="CURVILINEAR"
          RadiusStartMm="5.0"
          RadiusStopMm="60.0"
          ThetaStartDeg="-60.0"
          ThetaStopDeg="60.0"
          OutputImageSizePixel="1200 800"
          TransducerCenterPixel="600 34"
          OutputImageSpacingMmPerPixel="0.084 0.087" />
    </RfProcessing>
  </vtkPlusUsSimulatorAlgo>
  
  <CoordinateDefinitions>
    <Transform From="Image" To="Probe"
	       Matrix="-0.00228039 0.0860508 -0.00121134 0
		       -0.0860501 -0.00229763 -0.00122624 0
		       -0.00125802 0.0011783 0.0860722 0
		       0 0 0 1"
	       Error="0.582721" Date="2012.02.06 17:57:00" />
    <Transform From="Image" To="TransducerOriginPixel"
	       Matrix="1 0 0 0
		       0 1 0 0
		       0 0 1 0
		       0 0 0 1" />    
  </CoordinateDefinitions> 
  
</PlusConfiguration>
